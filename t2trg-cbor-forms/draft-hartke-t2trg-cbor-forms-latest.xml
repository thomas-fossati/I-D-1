<?xml version="1.0" encoding="us-ascii"?>

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
  <!ENTITY RFC2119 SYSTEM "reference.RFC.2119.xml">
  <!ENTITY RFC7049 SYSTEM "reference.RFC.7049.xml">
  <!ENTITY RFC7228 SYSTEM "reference.RFC.7228.xml">
  <!ENTITY RFC7578 SYSTEM "reference.RFC.7578.xml">
  <!ENTITY I-D.greevenbosch-appsawg-cbor-cddl SYSTEM "reference.I-D.greevenbosch-appsawg-cbor-cddl.xml">
  <!ENTITY I-D.hartke-t2trg-coral SYSTEM "reference.I-D.hartke-t2trg-coral.xml">
  <!ENTITY W3C.REC-html5-20141028 SYSTEM "reference.W3C.REC-html5-20141028.xml">
  <!ENTITY SELF "[RFCXXXX]">
]>

<?xml-stylesheet type="text/xsl" href="rfc2629.xslt"?>

<?rfc compact="yes"?>
<?rfc sortrefs="yes"?>
<?rfc subcompact="no"?>
<?rfc symrefs="yes"?>
<?rfc toc="yes"?>
<?rfc tocdepth="2"?>

<rfc category="exp" docName="draft-hartke-t2trg-cbor-forms-00" ipr="trust200902">

  <front>

    <title>CBOR-encoded Form Data</title>

    <author initials="K." surname="Hartke" fullname="Klaus Hartke">
      <organization>Universitaet Bremen TZI</organization>
      <address>
        <postal>
          <street>Postfach 330440</street>
          <city>Bremen</city>
          <code>D-28359</code>
          <country>Germany</country>
        </postal>
        <phone>+49-421-218-63905</phone>
        <email>hartke@tzi.org</email>
      </address>
    </author>

    <date />

    <workgroup>Thing-to-Thing Research Group</workgroup>

    <abstract>

      <t>
        This document describes a media type to encode form data in CBOR format.
      </t>

    </abstract>

  </front>

  <middle>

    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->

    <section title="Introduction">

      <t>
        This document describes a way to encode form data in <xref
        target="RFC7049">CBOR</xref> format, similar to the well-known <xref
        target="W3C.REC-html5-20141028">"application/x-www-form-urlencoded"</xref>
        and <xref target="RFC7578">"multipart/form-data"</xref> media types. The
        use of a compact, binary representation format enables the processing of
        form submissions on systems with very limited memory, processor power,
        and instruction sets <xref target="RFC7228"/>.
      </t>

      <!--
      <section title="Terminology">

        <t>
          The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
          "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
          "OPTIONAL" in this document are to be interpreted as described in
          <xref target="RFC2119"/>.
        </t>

      </section>
      -->

    </section>

    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->

    <section title="Form Body Syntax">

      <t>
        <xref target="I-D.hartke-t2trg-coral">CoRAL</xref> provides a
        representation format for forms that is suitable for constrained
        systems. However, it does not provide a syntax for specifying the fields
        of a form in the form body and leaves this task to other specifications.
        This section defines such a syntax based on <xref
        target="I-D.greevenbosch-appsawg-cbor-cddl">CDDL</xref>.
      </t>

      <t>
        A form body in this syntax consists of a CDDL specification. At the
        root, the specification defines a type, which describes the set of CBOR
        data items that are acceptable for submission as form data.
      </t>

      <t>
        Example:
      </t>

<figure><artwork type="cbor"><![CDATA[
   form-data = {"http://xmlns.com/foaf/0.1/firstName": text,
                "http://xmlns.com/foaf/0.1/lastName": text,
                "http://xmlns.com/foaf/0.1/age": uint}
]]></artwork></figure>

      <t>
        This describes three form fields for submitting the first name, last
        name and age of a person (using the <xref target="FOAF">FOAF</xref>
        vocabulary to indicate the semantics of the individual form fields to an
        automated agent).
      </t>

    </section>

    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->

    <section title="Form Data Syntax">

      <t>
        Form data is serialized as a CBOR data item that matches the CDDL
        specification in the form body. The media type is "application/cbor".
      </t>

      <t>
        Example:
      </t>

<figure><artwork type="cbor"><![CDATA[
   a3                                      # map(3)
      78 23                                # text(35)
         687474703a2f2f786d6c6e732e636f6d  #  "http://xmlns.com"
         2f666f61662f302e312f66697273744e  #  "/foaf/0.1/firstN"
         616d65                            #  "ame"
      64                                   # text(4)
         4a616e65                          #  "Jane"
      78 22                                # text(34)
         687474703a2f2f786d6c6e732e636f6d  #  "http://xmlns.com"
         2f666f61662f302e312f6c6173744e61  #  "/foaf/0.1/lastNa"
         6d65                              #  "me"
      63                                   # text(3)
         446f65                            #  "Doe"
      78 1d                                # text(29)
         687474703a2f2f786d6c6e732e636f6d  #  "http://xmlns.com"
         2f666f61662f302e312f616765        #  "/foaf/0.1/age"
      18 20                                # unsigned(32)
]]></artwork></figure>

    </section>

    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->

    <section title="Security Considerations" anchor="security">

      <t>
        TODO.
      </t>

    </section>

    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->

    <section title="IANA Considerations">

      <t>
        This document includes no request to IANA.
      </t>

    </section>

    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->

  </middle>

  <back>

    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->

    <references title="Normative References">

      <!--&RFC2119;-->
      &RFC7049;

    </references>

    <references title="Informative References">

      &RFC7228;
      &RFC7578;
      &I-D.greevenbosch-appsawg-cbor-cddl;
      &I-D.hartke-t2trg-coral;
      &W3C.REC-html5-20141028;

      <reference anchor="FOAF" target="http://xmlns.com/foaf/spec/20140114.html">
        <front>
          <title>FOAF Vocabulary Specification 0.99</title>
          <author initials="D." surname="Brickley" fullname="Dan Brickley"/>
          <author initials="L." surname="Miller" fullname="Libby Miller"/>
          <date month="January" day="14" year="2014"/>
        </front>
      </reference>

    </references>

    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->

    <!--
    <section title="Acknowledgements" numbered="no">

      <t>
        Thanks to
        X,
        Y and
        Z
        for helpful comments and discussions that have shaped the document.
      </t>

    </section>
    -->

    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->

  </back>

</rfc>
