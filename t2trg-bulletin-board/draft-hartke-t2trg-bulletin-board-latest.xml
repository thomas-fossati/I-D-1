<?xml version="1.0" encoding="us-ascii"?>

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
  <!ENTITY RFC2119 SYSTEM "reference.RFC.2119.xml">
  <!ENTITY RFC5988 SYSTEM "reference.RFC.5988.xml">
  <!ENTITY RFC6573 SYSTEM "reference.RFC.6573.xml">
  <!ENTITY RFC7252 SYSTEM "reference.RFC.7252.xml">
  <!ENTITY RFC7641 SYSTEM "reference.RFC.7641.xml">
  <!ENTITY I-D.hartke-core-apps SYSTEM "reference.I-D.hartke-core-apps.xml">
  <!ENTITY I-D.hartke-core-lighting SYSTEM "reference.I-D.hartke-core-lighting.xml">
  <!ENTITY I-D.hartke-t2trg-coral SYSTEM "reference.I-D.hartke-t2trg-coral.xml">
]>

<?xml-stylesheet type="text/xsl" href="rfc2629.xslt"?>

<?rfc compact="yes"?>
<?rfc sortrefs="yes"?>
<?rfc subcompact="no"?>
<?rfc symrefs="yes"?>
<?rfc toc="yes"?>
<?rfc tocdepth="2"?>

<rfc category="exp" docName="draft-hartke-t2trg-bulletin-board-00" ipr="trust200902">

  <front>

    <title>Bulletin Board</title>

    <author initials="K." surname="Hartke" fullname="Klaus Hartke">
      <organization>Universitaet Bremen TZI</organization>
      <address>
        <postal>
          <street>Postfach 330440</street>
          <city>Bremen</city>
          <code>D-28359</code>
          <country>Germany</country>
        </postal>
        <phone>+49-421-218-63905</phone>
        <email>hartke@tzi.org</email>
      </address>
    </author>

    <date />

    <workgroup>Thing-to-Thing Research Group</workgroup>

    <abstract>

      <t>
        A bulletin board is a hypermedia-driven REST application that can be
        used in Thing-to-Thing communication for publishing information such as
        thing descriptions, configurations, resource descriptions or sleep
        schedules at a central location.
      </t>

    </abstract>

  </front>

  <middle>

    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->

    <section title="Introduction">

      <t>
        <xref target="I-D.hartke-core-lighting">CoRE Lighting</xref> defines a
        "bulletin board" application that can be used for sharing the thing
        descriptions of sensor and actuator nodes. The present document
        generalizes the bulletin board to support representations in any media
        type and defines means for creating, reading, observing, updating,
        deleting and finding items in a bulletin board.
      </t>

      <t>
        The generalization to any media type provides two advantages: The first
        ist media type agility -- applications won't be stuck forever with the
        media types of CoRE Lighting. The second is that it may be useful to
        share also other information than thing descriptions, such as default
        configurations for new devices, service locations or sleep schedules.
      </t>

      <t>
        Finding items provides a powerful mechanism for retrieving a subset of
        items from a bulletin board. In CoRE Lighting, a configurator needs to
        download the whole set of thing descriptions, filter the set and
        configure compatible devices. It is more efficient to filter the set at
        the bulletin board server. To make this work with any media type, a
        search request needs to specify both the media type and a media
        type-specific query.
      </t>

      <t>
        The generalized bulletin board is presented as a <xref
        target="I-D.hartke-core-apps">CoRE Application</xref>. That is, the
        focus is on media types and interactions are driven by <xref
        target="RFC5988">Web links</xref> and forms.
      </t>

      <section title="Terminology">

        <t>
          Readers are expected to be familiar with the terms and concepts
          described in <xref target="RFC5988"/>, <xref target="RFC6573"/>, and
          <xref target="I-D.hartke-core-apps"/>.
        </t>

        <t>
          The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
          "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
          "OPTIONAL" in this document are to be interpreted as described in
          <xref target="RFC2119"/>.
        </t>
        
      </section>

    </section>

    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->

    <section title="Bulletin Boards">

      <t>
        This section defines the data model and the interaction model of
        bulletin boards.
      </t>

      <section title="Data Model">

        <t>
          The data model consists of two elements: the bulletin board and a
          number of published items (<xref target="fig-bb"/>).
        </t>

        <figure anchor="fig-bb" title="A Bulletin Board with a Number of Items">
          <artwork align="center">
<![CDATA[          __
Bulletin /  \
   Board \__/         __
           |_________/  \ Item 1
           |         \__/
           |          __
           |_________/  \ Item 2
           |         \__/
           |                .
           |                .
           |                .
           |          __
           |_________/  \ Item N
                     \__/]]>
          </artwork>
        </figure>

        <t>
          <list style="hanging">
            <t hangText="Bulletin Board">
              <vspace blankLines="1"/>
              A bulletin board is a service intended for the posting of public
              messages, for example, to share thing descriptions, announce
              services, or provide information. Nodes can leave and erase
              messages for other nodes to read and see.
            </t>
            <t>
              A bulletin board represents a collection of items. Its
              representation mainly consists of links to the item resources
              using the "item" link relation type. However, it may also include
              (abbreviated or full) representations of those item resources.
            </t>
            <t>
              For a start, a bulletin board has only a depth of one level; this
              could be extended to multiple levels in a future version.
            </t>
            <t>
              Bulletin board representations are formatted in the <xref
              target="I-D.hartke-t2trg-coral">'application/coral' media
              type</xref>.
            </t>
            <t hangText="Item">
              <vspace blankLines="1"/>
              An item represents a member of the collection.
            </t>
            <t>
              Item representations can in principle be formatted in any media
              type; a bulletin board deployment may restrict the media types it
              accepts for publication, though.
            </t>
          </list>
        </t>

      </section>

      <section title="Interaction Model">

        <t>
          The interaction model consists of eight possible interactions with a
          bulletin board: discovering and reading the bulletin board, and
          creating, reading, observing, updating, deleting and finding items.
        </t>

        <t>
          <list style="hanging">
            <t hangText="Discovery">
              <vspace blankLines="1"/>
              For a start, nodes are pre-configured out-of-band with a link to a
              bulletin board.
            </t>
            <t hangText="Read Bulletin Board">
              <vspace blankLines="1"/>
              A node can retrieve a representation of the bulletin board by
              following the pre-configured link. The representation of the
              bulletin board includes links to and/or embedded representations
              of the items in the bulletin board. The representation may also
              include forms for creating, updating, deleting and finding items.
            </t>
            <t hangText="Create Item">
              <vspace blankLines="1"/>
              The representation of a bulletin board may contain a form with the
              "create-item" form relation type. Submitting this form with a
              representation in one of the accepted content formats creates a
              new item in the bulletin board.
            </t>
            <t hangText="Read Item">
              <vspace blankLines="1"/>
              A node can retrieve a representation of an item by following one
              of the links with the "item" link relation type in the
              representation of the bulletin board.
            </t>
            <t hangText="Observe Item">
              <vspace blankLines="1"/>
              A node can observe an item by following one of the links with the
              "item" link relation type in the representation of the bulletin
              board and observing the resource as specified in <xref
              target="RFC7641"/>.
            </t>
            <t hangText="Update Item">
              <vspace blankLines="1"/>
              For each item in a bulletin board, the representation of the
              bulletin board may indicate that the item is updatable. If an item
              is updatable, a form with the "update" form relation type is
              implied. Submitting this form updates the item in the bulletin
              board to the submitted representation.
            </t>
            <t hangText="Delete Item">
              <vspace blankLines="1"/>
              For each item in a bulletin board, the representation of the
              bulletin board may indicate that the item is deletable. If an item
              is deletable, a form with the "delete" form relation type is
              implied. Submitting this form deletes the item from the bulletin
              board.
            </t>
            <t hangText="Find Items">
              <vspace blankLines="1"/>
              A form with the "search" form relation type can be used to find
              items. Submitting this form with a media type and a media
              type-specific query returns a subset of the bulletin board that
              matches the query.
            </t>
          </list>
        </t>

      </section>

      <section title="Application Description">

        <t>
          <list style="hanging">
            <t hangText="Application name:">
              <vspace/>Bulletin Board 1.0
            </t>
            <t hangText="URI schemes:">
              <vspace/><xref target="RFC7252">coap</xref>
            </t>
            <t hangText="Media types:">
              <vspace/><xref target="I-D.hartke-t2trg-coral">application/coral</xref>
              <!-- TODO: query -->
            </t>
            <t hangText="Link relation types:">
              <vspace/><xref target="RFC6573">item</xref>
            </t>
            <t hangText="Form relation types:">
              <vspace/><xref target="I-D.hartke-core-apps">create-item</xref>
              <vspace/><xref target="I-D.hartke-core-apps">update</xref>
              <vspace/><xref target="I-D.hartke-core-apps">delete</xref>
            </t>
            <t hangText="Well-known locations:">
              <vspace/>None.
            </t>
            <t hangText="Interoperability considerations:">
              <vspace/>See <xref target="interoperability"/>.
            </t>
            <t hangText="Security considerations:">
              <vspace/>See <xref target="security"/>.
            </t>
            <t hangText="Contact:">
              <vspace/>See "Author's Address" section.
            </t>
            <t hangText="Author/Change controller:">
              <vspace/>IESG
            </t>
          </list>
        </t>

      </section>

    </section>

    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->

    <section title="Interoperability Considerations" anchor="interoperability">

      <t>
        TODO.
      </t>

    </section>

    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->

    <section title="Security Considerations" anchor="security">

      <t>
        TODO.
      </t>

    </section>

    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->

    <section title="IANA Considerations">

      <t>
        This document includes no request to IANA.
      </t>

    </section>

  </middle>

  <back>

    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->

    <references title="Normative References">

      &RFC2119;
      &RFC6573;
      &RFC7252;
      &RFC7641;
      &I-D.hartke-core-apps;
      &I-D.hartke-t2trg-coral;

    </references>

    <references title="Informative References">

      &RFC5988;
      &I-D.hartke-core-lighting;

    </references>

    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->
    <!-- **************************************************************** -->

    <section title="Examples">

      <t>
        TODO.
      </t>

    </section>

  </back>

</rfc>
